import{r}from"./index.72123234.js";import{j as e,c as h,i as m,f as b,d as j,a as v,u as w,o as N,e as S,g as C,s as E}from"./units.0d2843bd.js";function g(t){return t.replace(/\s+/g,"_").toLowerCase()}function k({source:t,unit:i}){const a=l=>{const c=l.target.value,u=h.filter(o=>o.label===l.target.value)[0],x=h.find(o=>o.label==t).units.find(o=>o.id==i).chunks[0].label;if(u){const o=v.get(),p=h.find(s=>s.label===c).units.find(s=>s.chunks.find(d=>d.label==x&&d.apps[0]<=o&&o<=d.apps[1]))?.id||h.find(s=>s.label===c).units[0].id,n=`/viewer/${c}/${g(p)}`;window.location.replace(n)}};return e.jsx("div",{children:e.jsxs("div",{className:"paging",children:[e.jsx("div",{className:"in-line",children:e.jsxs("form",{method:"get",action:"viewer",children:[e.jsx("label",{className:"bold-choose",children:"CHOOSE A VERSION"}),e.jsx("select",{className:"select-style",name:"tei",value:t,onChange:a,children:h.map(l=>e.jsx("option",{className:l.label,value:l.label,children:l.label},l.label))})]})}),e.jsxs("div",{id:"font_button",className:"in-line",children:[e.jsx("button",{id:"increase-font",onClick:m,disabled:b.get()>=1.3}),e.jsx("button",{id:"decrease-font",onClick:j,disabled:b.get()<=.8})]})]})})}function P(){const t=r.useRef([]),i=w(E);return r.useEffect(()=>{t.current=[...document.querySelectorAll("tei-text")]},[]),r.useEffect(()=>{(t.current||!i[3])&&t.current.forEach(a=>{a.classList.toggle("no-text",!i.showText)})},[i]),e.jsxs("div",{children:[e.jsx("label",{className:"options-label bold-choose",children:"CHOOSE OPTIONS"}),e.jsxs("label",{className:"options-label",children:[e.jsx("input",{name:"variation",type:"checkbox",checked:i.showVariants,onChange:N}),"See Variants"]}),e.jsxs("label",{className:"options-label",children:[e.jsx("input",{name:"text",type:"checkbox",checked:i.showText,onChange:S}),"See Text"]}),e.jsxs("label",{className:"options-label",children:[e.jsx("input",{name:"note",type:"checkbox",checked:i.showNote,onChange:C}),"See Note"]})]})}function O({source:t,unit:i}){const[a,l]=r.useState(0),c=h.filter(n=>n.label===t).flatMap(n=>n.units.map(s=>s.id));r.useEffect(()=>{const n=window.location.pathname.split("/"),s=n[n.length-1].split("#")[0],d=c.findIndex(f=>f===s);l(d)},[]);const u=()=>{if(a>0){const n=a-1;l(n);const s=`/viewer/${t}/${c[n]}#viewer__contents`;window.location.replace(s)}},x=()=>{if(a<c.length-1){const n=a+1;l(n);const s=`/viewer/${t}/${c[n]}#viewer__contents`;window.location.replace(s)}},o=h.filter(n=>n.label===t)[0],p=n=>{const s=n.target.value,d=`/viewer/${t}/${g(s)}`;window.location.replace(d)};return e.jsx("div",{children:e.jsxs("div",{className:"paging",children:[e.jsx("div",{className:"in-line",children:e.jsxs("form",{method:"get",children:[e.jsx("label",{className:"bold-choose",children:"CHOOSE A SECTION"}),e.jsx("select",{className:"select-style",value:i,onChange:p,children:o.units.map(n=>e.jsx("option",{value:g(n.id),children:n.label},n.id))})]})}),e.jsxs("div",{className:"in-line paging-buttons",children:[e.jsx("button",{onClick:u,className:"prev",disabled:a<=0}),e.jsx("label",{children:"Previous Page"}),e.jsx("label",{className:"margin-button",children:"Next Page"}),e.jsx("button",{className:"next",onClick:x,disabled:a>=c.length-1})]})]})})}function T(){const[t,i]=r.useState("MS"),[a,l]=r.useState();return r.useEffect(()=>{const[c,u,x,o]=window.location.pathname.split("/");i(x),l(o)},[]),e.jsx(e.Fragment,{children:e.jsxs("div",{id:"viewer__controls",children:[e.jsx(k,{source:t,unit:a}),e.jsx(O,{source:t,unit:a}),e.jsx(P,{})]})})}export{T as default};
